<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Reproducibility | Relationele databases en SQL</title>
  <meta name="description" content="8 Reproducibility | Relationele databases en SQL" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Reproducibility | Relationele databases en SQL" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Reproducibility | Relationele databases en SQL" />
  
  
  

<meta name="author" content="Fatima Danawar" />


<meta name="date" content="2023-12-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="voorbeeld-data-analyse-analyse-van-c.-elegans-plaatexperiment.html"/>
<link rel="next" href="relationele-databases-en-sql.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.30/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Portfolio Inleiding</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#over-mij"><i class="fa fa-check"></i><b>1.1</b> Over mij</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="curriculum-vitae.html"><a href="curriculum-vitae.html"><i class="fa fa-check"></i><b>2</b> Curriculum Vitae</a>
<ul>
<li class="chapter" data-level="2.1" data-path="curriculum-vitae.html"><a href="curriculum-vitae.html#mijn-cv-met-vitae-r-package"><i class="fa fa-check"></i><b>2.1</b> Mijn CV met <code>vitae</code> R package</a></li>
<li class="chapter" data-level="2.2" data-path="curriculum-vitae.html"><a href="curriculum-vitae.html#script"><i class="fa fa-check"></i><b>2.2</b> Script</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="doel.html"><a href="doel.html"><i class="fa fa-check"></i><b>3</b> Doel:</a></li>
<li class="chapter" data-level="4" data-path="huidige-status.html"><a href="huidige-status.html"><i class="fa fa-check"></i><b>4</b> Huidige Status:</a></li>
<li class="chapter" data-level="5" data-path="volgende-vaardigheden-om-te-leren.html"><a href="volgende-vaardigheden-om-te-leren.html"><i class="fa fa-check"></i><b>5</b> Volgende Vaardigheden om te leren:</a></li>
<li class="chapter" data-level="6" data-path="leerplan.html"><a href="leerplan.html"><i class="fa fa-check"></i><b>6</b> Leerplan:</a>
<ul>
<li class="chapter" data-level="6.1" data-path="leerplan.html"><a href="leerplan.html#dag-1-data-voorbereiden-en-uitlijnen"><i class="fa fa-check"></i><b>6.1</b> Dag 1 : Data voorbereiden en uitlijnen:</a></li>
<li class="chapter" data-level="6.2" data-path="leerplan.html"><a href="leerplan.html#dag-2-variant-calling-en-mutatie-identificatie"><i class="fa fa-check"></i><b>6.2</b> Dag 2: Variant calling en mutatie-identificatie</a></li>
<li class="chapter" data-level="6.3" data-path="leerplan.html"><a href="leerplan.html#dag-3-verfijnen-en-rapporteren"><i class="fa fa-check"></i><b>6.3</b> Dag 3: Verfijnen en rapporteren</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="voorbeeld-data-analyse-analyse-van-c.-elegans-plaatexperiment.html"><a href="voorbeeld-data-analyse-analyse-van-c.-elegans-plaatexperiment.html"><i class="fa fa-check"></i><b>7</b> Voorbeeld data analyse ( Analyse van C. elegans Plaatexperiment)</a></li>
<li class="chapter" data-level="8" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>8</b> Reproducibility</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reproducibility.html"><a href="reproducibility.html#artikel-kezien-en-werken-met-het"><i class="fa fa-check"></i><b>8.1</b> Artikel kezien en werken met het</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="reproducibility.html"><a href="reproducibility.html#reference-van-dit-artikel"><i class="fa fa-check"></i><b>8.1.1</b> Reference van dit artikel:</a></li>
<li class="chapter" data-level="8.1.2" data-path="reproducibility.html"><a href="reproducibility.html#criteria-van-dit-artikel"><i class="fa fa-check"></i><b>8.1.2</b> Criteria van dit artikel</a></li>
<li class="chapter" data-level="8.1.3" data-path="reproducibility.html"><a href="reproducibility.html#meer-informatie-over-dit-artikel"><i class="fa fa-check"></i><b>8.1.3</b> Meer informatie over dit artikel</a></li>
<li class="chapter" data-level="8.1.4" data-path="reproducibility.html"><a href="reproducibility.html#werken-met-code-van-artikel-r-code-paper"><i class="fa fa-check"></i><b>8.1.4</b> Werken met code van artikel (R code paper)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="relationele-databases-en-sql.html"><a href="relationele-databases-en-sql.html"><i class="fa fa-check"></i><b>9</b> Relationele databases en SQL</a>
<ul>
<li class="chapter" data-level="9.1" data-path="relationele-databases-en-sql.html"><a href="relationele-databases-en-sql.html#maak-verbinding-met-de-database"><i class="fa fa-check"></i><b>9.1</b> Maak verbinding met de database</a></li>
<li class="chapter" data-level="9.2" data-path="relationele-databases-en-sql.html"><a href="relationele-databases-en-sql.html#samenvoegende-table-van-alle-drie-data"><i class="fa fa-check"></i><b>9.2</b> Samenvoegende table van alle drie data</a></li>
<li class="chapter" data-level="9.3" data-path="relationele-databases-en-sql.html"><a href="relationele-databases-en-sql.html#drie-statistieken-met-samenvogende-table"><i class="fa fa-check"></i><b>9.3</b> Drie statistieken met samenvogende table</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-managment-met-gruerrilla-analytics-structure.html"><a href="data-managment-met-gruerrilla-analytics-structure.html"><i class="fa fa-check"></i><b>10</b> Data managment met Gruerrilla analytics structure</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Relationele databases en SQL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reproducibility" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Reproducibility<a href="reproducibility.html#reproducibility" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="artikel-kezien-en-werken-met-het" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Artikel kezien en werken met het<a href="reproducibility.html#artikel-kezien-en-werken-met-het" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Een van de vaardigheden die nuttig zijn in datascience, is het bekijken van een wetenschappelijk artikel en het gebruik van de code in het artikel om exact dezelfde resultaten te verkrijgen met de dataset. Dit wordt reproduceerbaarheid genoemd.</p>
<p>Een van de vaardigheden die ik heb geleerd, is het beoordelen van een artikel op basis van zijn reproduceerbaarheid. Om mijn vaardigheid op het gebied van het beoordelen van reproduceerbaarheid te tonen, heb ik willekeurig een artikel uit PubMed gehaald. Je kunt dit artikel vinden (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10180718/" class="uri">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10180718/</a>).</p>
<p>In het artikel “The value of supportive care: A systematic review of cost-effectiveness of non-pharmacological interventions for dementia” heb ik de reproduceerbaarheid beoordeeld aan de hand van specifieke criteria, zoals het doel van de studie, de beschikbaarheid van gegevens, de locatie van de gegevens, en meer. Deze beoordeling stelde me in staat om de mate van transparantie van het artikel vast te stellen en of anderen in staat zouden zijn om mijn resultaten te reproduceren.</p>
<div id="reference-van-dit-artikel" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Reference van dit artikel:<a href="reproducibility.html#reference-van-dit-artikel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Angelica Guzzon, Vincenzo Rebba, Omar Paccagnella, Michela Rigon, Giovanni Boniolo</p>
</div>
<div id="criteria-van-dit-artikel" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Criteria van dit artikel<a href="reproducibility.html#criteria-van-dit-artikel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="18%" />
<col width="70%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th>Transparency Criteria</th>
<th>Definition</th>
<th>Response Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Study Purpose</td>
<td>A concise statement in the introduction of the article, often in the last paragraph, that establishes the reason the research was conducted. Also called the study objective.</td>
<td>yes</td>
</tr>
<tr class="even">
<td>Data Availability Statement</td>
<td>A statement, in an individual section offset from the main body of text, that explains how or if one can access a study’s data. The title of the section may vary, but it must explicitly mention data; it is therefore distinct from a supplementary materials section.</td>
<td>yes</td>
</tr>
<tr class="odd">
<td>Data Location</td>
<td>Where the article’s data can be accessed, either raw or processed.</td>
<td>All relevant data are within the manuscript and its Supporting information files.</td>
</tr>
<tr class="even">
<td>Study Location</td>
<td>Author has stated in the methods section where the study took place or the data’s country/region of origin.</td>
<td>Italy</td>
</tr>
<tr class="odd">
<td>Author Review</td>
<td>The professionalism of the contact information that the author has provided in the manuscript.</td>
<td>Per mail</td>
</tr>
<tr class="even">
<td>Ethics Statement</td>
<td>A statement within the manuscript indicating any ethical concerns, including the presence of sensitive data.</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Funding Statement</td>
<td>A statement within the manuscript indicating whether or not the authors received funding for their research.</td>
<td>Binary</td>
</tr>
<tr class="even">
<td>Code Availability</td>
<td>Authors have shared access to the most updated code that they used in their study, including code used for analysis.</td>
<td>yes</td>
</tr>
</tbody>
</table>
</div>
<div id="meer-informatie-over-dit-artikel" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Meer informatie over dit artikel<a href="reproducibility.html#meer-informatie-over-dit-artikel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Algemeen Doel van de Studie</p>
<p>Het algemene doel van de studie is om de waarde van ondersteunende zorg te onderzoeken door middel van een systematische review van de kosteneffectiviteit van niet-farmacologische interventies voor dementie.</p>
<p>Methoden
Voor de methoden van de studie werden systematische literatuuronderzoeken uitgevoerd tussen februari 2019 en december 2021. Verschillende databases werden doorzocht, waaronder PubMed, Cochrane Library, CENTRAL, Embase en PsycINFO. De zoekstrategie was gebaseerd op de PRISMA 2020-aanbevelingen. Studies gepubliceerd tot december 2021 werden overwogen, zonder ondergrens voor de publicatiedatum. Vijf categorieën van ondersteunende zorgstrategieën werden onderscheiden.</p>
<p>Resultaten
Van de 5,479 geïdentificeerde artikelen voldeden 39 aan de inclusiecriteria. Deze studies analyseerden 35 ondersteunende zorgprogramma’s op verschillende momenten in het dementiezorgtraject. Elf studies gaven bewijs van hoge kosteneffectiviteit voor zeven interventies, waaronder multicomponent-interventies, indirecte interventies, interventies gericht op zorgverleners en gemeenschapsgerichte programma’s.</p>
</div>
<div id="werken-met-code-van-artikel-r-code-paper" class="section level3 hasAnchor" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Werken met code van artikel (R code paper)<a href="reproducibility.html#werken-met-code-van-artikel-r-code-paper" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In de wereld van data science is het ook een nuttige vaardigheid om te werken met open science artikelen. Deze artikelen tonen hun code en laten zien hoe ze aan hun gegevens zijn gekomen.
Mijn keuze viel op het artikel ‘Infection fatality rate of COVID-19 in community dwelling elderly’ in dit link: <a href="https://osf.io/w3rzd/" class="uri">https://osf.io/w3rzd/</a>.</p>
<p>Deze R-code lijkt te zijn geschreven voor een analyse van de infectie-sterftecijfers (IFR) van COVID-19 in verschillende leeftijdsgroepen, met speciale aandacht voor oudere populaties. Het script verwerkt gegevens uit een Excel-bestand (ifr-data3-younger.xlsx) en voert een reeks bewerkingen en analyses uit.</p>
<p>In termen van leesbaarheid van de code zou ik deze een 3 op 5 geven. Want ik heb errors geregen vanwege niet alle benodigde libraries zijn staan in de code, en het plot zelf is beetje moeilijk om te lezen want daar staan verschillende lijnen die sneden aan elkaar dus de plot niet goed leesbaar.</p>
<p>Als ik zou moeten schalen hoe gemakkelijk de plot is om te reproduceren waarbij 1 heel moeilijk is, en 5 heel gemakkelijk, zou ik het een 5 geven. Dit komt omdat het enige dat veranderd moest worden het pad voor het invoerbestand was.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="reproducibility.html#cb8-1" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="st">&quot;2021-10-18&quot;</span> <span class="co">#Set today&#39;s date in format YYYY-MM-DD</span></span>
<span id="cb8-2"><a href="reproducibility.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="reproducibility.html#cb8-3" tabindex="-1"></a><span class="co"># Load files ----</span></span>
<span id="cb8-4"><a href="reproducibility.html#cb8-4" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(<span class="st">&quot;C:/Users/Laptop/Downloads/Workflow-Portfolio/data/ifr-data3-younger.xlsx&quot;</span>)</span>
<span id="cb8-5"><a href="reproducibility.html#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="reproducibility.html#cb8-6" tabindex="-1"></a><span class="co"># Load packages ----</span></span>
<span id="cb8-7"><a href="reproducibility.html#cb8-7" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-8"><a href="reproducibility.html#cb8-8" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-9"><a href="reproducibility.html#cb8-9" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb8-10"><a href="reproducibility.html#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="reproducibility.html#cb8-11" tabindex="-1"></a></span>
<span id="cb8-12"><a href="reproducibility.html#cb8-12" tabindex="-1"></a><span class="do">### Data management ----</span></span>
<span id="cb8-13"><a href="reproducibility.html#cb8-13" tabindex="-1"></a></span>
<span id="cb8-14"><a href="reproducibility.html#cb8-14" tabindex="-1"></a><span class="co"># infected_agebins  ----</span></span>
<span id="cb8-15"><a href="reproducibility.html#cb8-15" tabindex="-1"></a><span class="co">#Number of infected people in the age bin for date 1.</span></span>
<span id="cb8-16"><a href="reproducibility.html#cb8-16" tabindex="-1"></a><span class="co">#Estimated by multiplying the adjusted estimate (and if unavailable, the unadjusted) of</span></span>
<span id="cb8-17"><a href="reproducibility.html#cb8-17" tabindex="-1"></a><span class="co">#seroprevalence in the age bin with pop_agebins.</span></span>
<span id="cb8-18"><a href="reproducibility.html#cb8-18" tabindex="-1"></a></span>
<span id="cb8-19"><a href="reproducibility.html#cb8-19" tabindex="-1"></a><span class="fu">library</span>(rlang)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;rlang&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:purrr&#39;:
## 
##     %@%, flatten, flatten_chr, flatten_dbl, flatten_int, flatten_lgl,
##     flatten_raw, invoke, splice</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="reproducibility.html#cb11-1" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">modify_at</span>(agebins, <span class="fu">c</span>(<span class="st">&quot;adj_sero_agebins&quot;</span>, <span class="st">&quot;crude_sero_agebins&quot;</span>, <span class="st">&quot;sero_agebins_g1&quot;</span>, <span class="st">&quot;sero_agebins_g2&quot;</span>, <span class="st">&quot;sero_agebins_g3&quot;</span>, <span class="st">&quot;pop_agebins_g1&quot;</span>, <span class="st">&quot;pop_agebins_g2&quot;</span>, <span class="st">&quot;pop_agebins_g3&quot;</span>, <span class="st">&quot;sero_agebins_g4&quot;</span>, <span class="st">&quot;pop_agebins_g4&quot;</span>, <span class="st">&quot;pop_agebins&quot;</span>, <span class="st">&quot;number_sampled&quot;</span>), <span class="sc">~</span><span class="fu">as.numeric</span>(.x))</span>
<span id="cb11-2"><a href="reproducibility.html#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="reproducibility.html#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="reproducibility.html#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="reproducibility.html#cb11-5" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-6"><a href="reproducibility.html#cb11-6" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">infected_agebins =</span> <span class="fu">case_when</span>(</span>
<span id="cb11-7"><a href="reproducibility.html#cb11-7" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(adj_sero_agebins) <span class="sc">~</span> adj_sero_agebins<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins,</span>
<span id="cb11-8"><a href="reproducibility.html#cb11-8" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(sero_agebins_g4) <span class="sc">~</span></span>
<span id="cb11-9"><a href="reproducibility.html#cb11-9" tabindex="-1"></a>    (sero_agebins_g4<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g4 <span class="sc">+</span></span>
<span id="cb11-10"><a href="reproducibility.html#cb11-10" tabindex="-1"></a>    sero_agebins_g3<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g3 <span class="sc">+</span> </span>
<span id="cb11-11"><a href="reproducibility.html#cb11-11" tabindex="-1"></a>    sero_agebins_g2<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g2 <span class="sc">+</span> </span>
<span id="cb11-12"><a href="reproducibility.html#cb11-12" tabindex="-1"></a>    sero_agebins_g1<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g1) <span class="sc">/</span></span>
<span id="cb11-13"><a href="reproducibility.html#cb11-13" tabindex="-1"></a>    (pop_agebins_g4 <span class="sc">+</span> pop_agebins_g3 <span class="sc">+</span></span>
<span id="cb11-14"><a href="reproducibility.html#cb11-14" tabindex="-1"></a>     pop_agebins_g2 <span class="sc">+</span> pop_agebins_g1) <span class="sc">*</span> pop_agebins,</span>
<span id="cb11-15"><a href="reproducibility.html#cb11-15" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(sero_agebins_g3) <span class="sc">~</span> </span>
<span id="cb11-16"><a href="reproducibility.html#cb11-16" tabindex="-1"></a>    (sero_agebins_g3<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g3 <span class="sc">+</span> </span>
<span id="cb11-17"><a href="reproducibility.html#cb11-17" tabindex="-1"></a>    sero_agebins_g2<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g2 <span class="sc">+</span> </span>
<span id="cb11-18"><a href="reproducibility.html#cb11-18" tabindex="-1"></a>    sero_agebins_g1<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g1) <span class="sc">/</span></span>
<span id="cb11-19"><a href="reproducibility.html#cb11-19" tabindex="-1"></a>    (pop_agebins_g3 <span class="sc">+</span></span>
<span id="cb11-20"><a href="reproducibility.html#cb11-20" tabindex="-1"></a>       pop_agebins_g2 <span class="sc">+</span> pop_agebins_g1) <span class="sc">*</span> pop_agebins,</span>
<span id="cb11-21"><a href="reproducibility.html#cb11-21" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(sero_agebins_g2) <span class="sc">~</span></span>
<span id="cb11-22"><a href="reproducibility.html#cb11-22" tabindex="-1"></a>    (sero_agebins_g2<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g2 <span class="sc">+</span> </span>
<span id="cb11-23"><a href="reproducibility.html#cb11-23" tabindex="-1"></a>    sero_agebins_g1<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins_g1) <span class="sc">/</span></span>
<span id="cb11-24"><a href="reproducibility.html#cb11-24" tabindex="-1"></a>    (pop_agebins_g2 <span class="sc">+</span> pop_agebins_g1) <span class="sc">*</span> pop_agebins,</span>
<span id="cb11-25"><a href="reproducibility.html#cb11-25" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(crude_sero_agebins) <span class="sc">~</span> crude_sero_agebins<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span>pop_agebins,</span>
<span id="cb11-26"><a href="reproducibility.html#cb11-26" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb11-27"><a href="reproducibility.html#cb11-27" tabindex="-1"></a>))</span>
<span id="cb11-28"><a href="reproducibility.html#cb11-28" tabindex="-1"></a></span>
<span id="cb11-29"><a href="reproducibility.html#cb11-29" tabindex="-1"></a></span>
<span id="cb11-30"><a href="reproducibility.html#cb11-30" tabindex="-1"></a><span class="co"># deaths_agebins_date1 ----</span></span>
<span id="cb11-31"><a href="reproducibility.html#cb11-31" tabindex="-1"></a><span class="co">#COVID-19 deaths in age bin for date 1, estimated using deaths_agebins_date2, age_date2,</span></span>
<span id="cb11-32"><a href="reproducibility.html#cb11-32" tabindex="-1"></a><span class="co">#and deaths_date1</span></span>
<span id="cb11-33"><a href="reproducibility.html#cb11-33" tabindex="-1"></a><span class="co">#NAs introduced, that&#39;s OK</span></span>
<span id="cb11-34"><a href="reproducibility.html#cb11-34" tabindex="-1"></a></span>
<span id="cb11-35"><a href="reproducibility.html#cb11-35" tabindex="-1"></a></span>
<span id="cb11-36"><a href="reproducibility.html#cb11-36" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">deaths_agebins_date1 =</span> <span class="fu">case_when</span>(</span>
<span id="cb11-37"><a href="reproducibility.html#cb11-37" tabindex="-1"></a>  age_date2 <span class="sc">==</span> <span class="st">&quot;Not applicable&quot;</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(deaths_agebins_date2),</span>
<span id="cb11-38"><a href="reproducibility.html#cb11-38" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(<span class="fu">as.numeric</span>(deaths_agebins_date2)) <span class="sc">~</span> </span>
<span id="cb11-39"><a href="reproducibility.html#cb11-39" tabindex="-1"></a>    <span class="fu">as.numeric</span>(deaths_agebins_date2)<span class="sc">/</span><span class="fu">as.numeric</span>(age_date2)<span class="sc">*</span><span class="fu">as.numeric</span>(deaths_date1),</span>
<span id="cb11-40"><a href="reproducibility.html#cb11-40" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb11-41"><a href="reproducibility.html#cb11-41" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## Warning: There were 2 warnings in `mutate()`.
## The first warning was:
## ℹ In argument: `deaths_agebins_date1 = case_when(...)`.
## Caused by warning:
## ! NAs introduced by coercion
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="reproducibility.html#cb13-1" tabindex="-1"></a><span class="co"># ifr_uncorr_agebins ----</span></span>
<span id="cb13-2"><a href="reproducibility.html#cb13-2" tabindex="-1"></a><span class="co">#IFR in age bins, uncorrected</span></span>
<span id="cb13-3"><a href="reproducibility.html#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="reproducibility.html#cb13-4" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">ifr_uncorr_agebins =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-5"><a href="reproducibility.html#cb13-5" tabindex="-1"></a>  infected_agebins <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb13-6"><a href="reproducibility.html#cb13-6" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(deaths_agebins_date1) <span class="sc">~</span> deaths_agebins_date1<span class="sc">/</span>infected_agebins,</span>
<span id="cb13-7"><a href="reproducibility.html#cb13-7" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb13-8"><a href="reproducibility.html#cb13-8" tabindex="-1"></a>))</span>
<span id="cb13-9"><a href="reproducibility.html#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="reproducibility.html#cb13-10" tabindex="-1"></a></span>
<span id="cb13-11"><a href="reproducibility.html#cb13-11" tabindex="-1"></a><span class="co"># ifr_corr_agebins ----</span></span>
<span id="cb13-12"><a href="reproducibility.html#cb13-12" tabindex="-1"></a><span class="co">#IFR in age bins, corrected</span></span>
<span id="cb13-13"><a href="reproducibility.html#cb13-13" tabindex="-1"></a></span>
<span id="cb13-14"><a href="reproducibility.html#cb13-14" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">antibody_type2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-15"><a href="reproducibility.html#cb13-15" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;total|pan.Ig|IgG, IgM, IgA&quot;</span>, antibody_type, <span class="at">ignore.case =</span> T) <span class="sc">~</span> <span class="st">&quot;IgG/IgM/IgA&quot;</span>,</span>
<span id="cb13-16"><a href="reproducibility.html#cb13-16" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;IgG and.or IgM|IgG, IgM&quot;</span>, antibody_type, <span class="at">ignore.case =</span> T) <span class="sc">~</span> <span class="st">&quot;IgG/IgM&quot;</span>,</span>
<span id="cb13-17"><a href="reproducibility.html#cb13-17" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;missing|unclear&quot;</span>, antibody_type, <span class="at">ignore.case =</span> T) <span class="sc">~</span> <span class="st">&quot;Missing/Unclear&quot;</span>,</span>
<span id="cb13-18"><a href="reproducibility.html#cb13-18" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> antibody_type</span>
<span id="cb13-19"><a href="reproducibility.html#cb13-19" tabindex="-1"></a>))</span>
<span id="cb13-20"><a href="reproducibility.html#cb13-20" tabindex="-1"></a></span>
<span id="cb13-21"><a href="reproducibility.html#cb13-21" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">ifr_corr_agebins =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-22"><a href="reproducibility.html#cb13-22" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;IgG.IgM.IgA|missing&quot;</span>, antibody_type2, <span class="at">ignore.case =</span> T) <span class="sc">~</span> </span>
<span id="cb13-23"><a href="reproducibility.html#cb13-23" tabindex="-1"></a>    ifr_uncorr_agebins,</span>
<span id="cb13-24"><a href="reproducibility.html#cb13-24" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;^IgG$&quot;</span>, antibody_type2, <span class="at">ignore.case =</span> T) <span class="sc">~</span> ifr_uncorr_agebins<span class="sc">*</span><span class="fl">0.9</span><span class="sc">*</span><span class="fl">0.9</span>,</span>
<span id="cb13-25"><a href="reproducibility.html#cb13-25" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;IgG.IgM&quot;</span>, antibody_type2, <span class="at">ignore.case =</span> T) <span class="sc">~</span> ifr_uncorr_agebins<span class="sc">*</span><span class="fl">0.9</span></span>
<span id="cb13-26"><a href="reproducibility.html#cb13-26" tabindex="-1"></a>))</span>
<span id="cb13-27"><a href="reproducibility.html#cb13-27" tabindex="-1"></a></span>
<span id="cb13-28"><a href="reproducibility.html#cb13-28" tabindex="-1"></a></span>
<span id="cb13-29"><a href="reproducibility.html#cb13-29" tabindex="-1"></a></span>
<span id="cb13-30"><a href="reproducibility.html#cb13-30" tabindex="-1"></a><span class="co"># Mid-point of age bin ----</span></span>
<span id="cb13-31"><a href="reproducibility.html#cb13-31" tabindex="-1"></a><span class="co">#For Figure</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="reproducibility.html#cb14-1" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">modify_at</span>(agebins, <span class="fu">c</span>(<span class="st">&quot;upper_age&quot;</span>, <span class="st">&quot;lower_age&quot;</span>), </span>
<span id="cb14-2"><a href="reproducibility.html#cb14-2" tabindex="-1"></a>                            <span class="sc">~</span><span class="fu">as.numeric</span>(.x))</span>
<span id="cb14-3"><a href="reproducibility.html#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="reproducibility.html#cb14-4" tabindex="-1"></a>agebins<span class="sc">$</span>midpoint <span class="ot">&lt;-</span> <span class="fu">round</span>(agebins<span class="sc">$</span>lower_age <span class="sc">+</span> </span>
<span id="cb14-5"><a href="reproducibility.html#cb14-5" tabindex="-1"></a>                            (agebins<span class="sc">$</span>upper_age<span class="sc">-</span>agebins<span class="sc">$</span>lower_age)<span class="sc">/</span><span class="dv">2</span>, <span class="at">digits =</span> <span class="dv">1</span>)</span>
<span id="cb14-6"><a href="reproducibility.html#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="reproducibility.html#cb14-7" tabindex="-1"></a><span class="co">#Delete age bins that are not eligible</span></span>
<span id="cb14-8"><a href="reproducibility.html#cb14-8" tabindex="-1"></a>agebins<span class="sc">$</span>width <span class="ot">&lt;-</span> agebins<span class="sc">$</span>upper_age<span class="sc">-</span>agebins<span class="sc">$</span>lower_age</span>
<span id="cb14-9"><a href="reproducibility.html#cb14-9" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">included_plot =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-10"><a href="reproducibility.html#cb14-10" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;Not include&quot;</span>, comment, <span class="at">ignore.case =</span> T) <span class="sc">~</span> <span class="st">&quot;No&quot;</span>,</span>
<span id="cb14-11"><a href="reproducibility.html#cb14-11" tabindex="-1"></a><span class="co">#  grepl(&quot;No&quot;, filter_main_analysis, ignore.case = T) ~ &quot;No&quot;, #Fix: delete if original set is main set for this analysis</span></span>
<span id="cb14-12"><a href="reproducibility.html#cb14-12" tabindex="-1"></a>  width <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">&quot;Yes&quot;</span>,</span>
<span id="cb14-13"><a href="reproducibility.html#cb14-13" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;No&quot;</span></span>
<span id="cb14-14"><a href="reproducibility.html#cb14-14" tabindex="-1"></a>))</span>
<span id="cb14-15"><a href="reproducibility.html#cb14-15" tabindex="-1"></a></span>
<span id="cb14-16"><a href="reproducibility.html#cb14-16" tabindex="-1"></a></span>
<span id="cb14-17"><a href="reproducibility.html#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="reproducibility.html#cb14-18" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">subset</span>(agebins, included_plot <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb14-19"><a href="reproducibility.html#cb14-19" tabindex="-1"></a></span>
<span id="cb14-20"><a href="reproducibility.html#cb14-20" tabindex="-1"></a></span>
<span id="cb14-21"><a href="reproducibility.html#cb14-21" tabindex="-1"></a><span class="co"># Calculation of medians ----</span></span>
<span id="cb14-22"><a href="reproducibility.html#cb14-22" tabindex="-1"></a></span>
<span id="cb14-23"><a href="reproducibility.html#cb14-23" tabindex="-1"></a><span class="co"># location2</span></span>
<span id="cb14-24"><a href="reproducibility.html#cb14-24" tabindex="-1"></a>agebins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins, <span class="at">location2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-25"><a href="reproducibility.html#cb14-25" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;England|UK|Scotland&quot;</span>, location) <span class="sc">~</span> <span class="st">&quot;UK&quot;</span>,</span>
<span id="cb14-26"><a href="reproducibility.html#cb14-26" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;Canada&quot;</span>, location) <span class="sc">~</span> <span class="st">&quot;Canada&quot;</span>,</span>
<span id="cb14-27"><a href="reproducibility.html#cb14-27" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;India&quot;</span>, location) <span class="sc">~</span> <span class="st">&quot;India&quot;</span>,</span>
<span id="cb14-28"><a href="reproducibility.html#cb14-28" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;Qatar&quot;</span>, location) <span class="sc">~</span> <span class="st">&quot;Qatar&quot;</span>,</span>
<span id="cb14-29"><a href="reproducibility.html#cb14-29" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">&quot;France&quot;</span>, location) <span class="sc">~</span> <span class="st">&quot;France&quot;</span>,</span>
<span id="cb14-30"><a href="reproducibility.html#cb14-30" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> location</span>
<span id="cb14-31"><a href="reproducibility.html#cb14-31" tabindex="-1"></a>))</span>
<span id="cb14-32"><a href="reproducibility.html#cb14-32" tabindex="-1"></a></span>
<span id="cb14-33"><a href="reproducibility.html#cb14-33" tabindex="-1"></a></span>
<span id="cb14-34"><a href="reproducibility.html#cb14-34" tabindex="-1"></a></span>
<span id="cb14-35"><a href="reproducibility.html#cb14-35" tabindex="-1"></a><span class="co">#1. Separate datasets per age bin</span></span>
<span id="cb14-36"><a href="reproducibility.html#cb14-36" tabindex="-1"></a></span>
<span id="cb14-37"><a href="reproducibility.html#cb14-37" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&lt;</span><span class="dv">20</span>)</span>
<span id="cb14-38"><a href="reproducibility.html#cb14-38" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&gt;</span><span class="fl">19.9</span> <span class="sc">&amp;</span> midpoint<span class="sc">&lt;</span><span class="dv">30</span>)</span>
<span id="cb14-39"><a href="reproducibility.html#cb14-39" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&gt;</span><span class="fl">29.9</span> <span class="sc">&amp;</span> midpoint<span class="sc">&lt;</span><span class="dv">40</span>)</span>
<span id="cb14-40"><a href="reproducibility.html#cb14-40" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&gt;</span><span class="fl">39.9</span> <span class="sc">&amp;</span> midpoint<span class="sc">&lt;</span><span class="dv">50</span>)</span>
<span id="cb14-41"><a href="reproducibility.html#cb14-41" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&gt;</span><span class="fl">49.9</span> <span class="sc">&amp;</span> midpoint<span class="sc">&lt;</span><span class="dv">60</span>)</span>
<span id="cb14-42"><a href="reproducibility.html#cb14-42" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins, midpoint<span class="sc">&gt;</span><span class="fl">59.9</span> <span class="sc">&amp;</span> midpoint<span class="sc">&lt;</span><span class="dv">70</span>)</span>
<span id="cb14-43"><a href="reproducibility.html#cb14-43" tabindex="-1"></a><span class="co">#test &lt;- agebins0_19[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-44"><a href="reproducibility.html#cb14-44" tabindex="-1"></a><span class="co">#test &lt;- agebins20_29[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-45"><a href="reproducibility.html#cb14-45" tabindex="-1"></a><span class="co">#test &lt;- agebins30_39[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-46"><a href="reproducibility.html#cb14-46" tabindex="-1"></a><span class="co">#test &lt;- agebins40_49[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-47"><a href="reproducibility.html#cb14-47" tabindex="-1"></a><span class="co">#test &lt;- agebins50_59[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-48"><a href="reproducibility.html#cb14-48" tabindex="-1"></a><span class="co">#test &lt;- agebins60_69[c(&quot;lower_age&quot;, &quot;upper_age&quot;, &quot;midpoint&quot;)]</span></span>
<span id="cb14-49"><a href="reproducibility.html#cb14-49" tabindex="-1"></a></span>
<span id="cb14-50"><a href="reproducibility.html#cb14-50" tabindex="-1"></a></span>
<span id="cb14-51"><a href="reproducibility.html#cb14-51" tabindex="-1"></a></span>
<span id="cb14-52"><a href="reproducibility.html#cb14-52" tabindex="-1"></a><span class="co">#2. Sample size weighted averages for same country and age bin</span></span>
<span id="cb14-53"><a href="reproducibility.html#cb14-53" tabindex="-1"></a></span>
<span id="cb14-54"><a href="reproducibility.html#cb14-54" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins0_19, location2)</span>
<span id="cb14-55"><a href="reproducibility.html#cb14-55" tabindex="-1"></a><span class="fu">n_groups</span>(agebins0_19)</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="reproducibility.html#cb16-1" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins0_19, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-2"><a href="reproducibility.html#cb16-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb16-3"><a href="reproducibility.html#cb16-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb16-4"><a href="reproducibility.html#cb16-4" tabindex="-1"></a>))</span>
<span id="cb16-5"><a href="reproducibility.html#cb16-5" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins0_19, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb16-6"><a href="reproducibility.html#cb16-6" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins0_19, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb16-7"><a href="reproducibility.html#cb16-7" tabindex="-1"></a>agebins0_19 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins0_19)</span>
<span id="cb16-8"><a href="reproducibility.html#cb16-8" tabindex="-1"></a>agebins0_19<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;10&quot;</span></span>
<span id="cb16-9"><a href="reproducibility.html#cb16-9" tabindex="-1"></a><span class="co">#test &lt;- agebins0_19[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb16-10"><a href="reproducibility.html#cb16-10" tabindex="-1"></a></span>
<span id="cb16-11"><a href="reproducibility.html#cb16-11" tabindex="-1"></a></span>
<span id="cb16-12"><a href="reproducibility.html#cb16-12" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins20_29, location2)</span>
<span id="cb16-13"><a href="reproducibility.html#cb16-13" tabindex="-1"></a><span class="fu">n_groups</span>(agebins20_29)</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reproducibility.html#cb18-1" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins20_29, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb18-2"><a href="reproducibility.html#cb18-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb18-3"><a href="reproducibility.html#cb18-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb18-4"><a href="reproducibility.html#cb18-4" tabindex="-1"></a>))</span>
<span id="cb18-5"><a href="reproducibility.html#cb18-5" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins20_29, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb18-6"><a href="reproducibility.html#cb18-6" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins20_29, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb18-7"><a href="reproducibility.html#cb18-7" tabindex="-1"></a>agebins20_29 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins20_29)</span>
<span id="cb18-8"><a href="reproducibility.html#cb18-8" tabindex="-1"></a>agebins20_29<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;25&quot;</span></span>
<span id="cb18-9"><a href="reproducibility.html#cb18-9" tabindex="-1"></a><span class="co">#test &lt;- agebins20_29[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb18-10"><a href="reproducibility.html#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="reproducibility.html#cb18-11" tabindex="-1"></a></span>
<span id="cb18-12"><a href="reproducibility.html#cb18-12" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins30_39, location2)</span>
<span id="cb18-13"><a href="reproducibility.html#cb18-13" tabindex="-1"></a><span class="fu">n_groups</span>(agebins30_39)</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="reproducibility.html#cb20-1" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins30_39, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-2"><a href="reproducibility.html#cb20-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb20-3"><a href="reproducibility.html#cb20-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb20-4"><a href="reproducibility.html#cb20-4" tabindex="-1"></a>))</span>
<span id="cb20-5"><a href="reproducibility.html#cb20-5" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins30_39, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb20-6"><a href="reproducibility.html#cb20-6" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins30_39, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb20-7"><a href="reproducibility.html#cb20-7" tabindex="-1"></a>agebins30_39 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins30_39)</span>
<span id="cb20-8"><a href="reproducibility.html#cb20-8" tabindex="-1"></a>agebins30_39<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;35&quot;</span></span>
<span id="cb20-9"><a href="reproducibility.html#cb20-9" tabindex="-1"></a><span class="co">#test &lt;- agebins30_39[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb20-10"><a href="reproducibility.html#cb20-10" tabindex="-1"></a></span>
<span id="cb20-11"><a href="reproducibility.html#cb20-11" tabindex="-1"></a></span>
<span id="cb20-12"><a href="reproducibility.html#cb20-12" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins40_49, location2)</span>
<span id="cb20-13"><a href="reproducibility.html#cb20-13" tabindex="-1"></a><span class="fu">n_groups</span>(agebins40_49)</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reproducibility.html#cb22-1" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins40_49, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb22-2"><a href="reproducibility.html#cb22-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb22-3"><a href="reproducibility.html#cb22-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb22-4"><a href="reproducibility.html#cb22-4" tabindex="-1"></a>))</span>
<span id="cb22-5"><a href="reproducibility.html#cb22-5" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins40_49, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb22-6"><a href="reproducibility.html#cb22-6" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins40_49, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb22-7"><a href="reproducibility.html#cb22-7" tabindex="-1"></a>agebins40_49 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins40_49)</span>
<span id="cb22-8"><a href="reproducibility.html#cb22-8" tabindex="-1"></a>agebins40_49<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;45&quot;</span></span>
<span id="cb22-9"><a href="reproducibility.html#cb22-9" tabindex="-1"></a><span class="co">#test &lt;- agebins40_49[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb22-10"><a href="reproducibility.html#cb22-10" tabindex="-1"></a></span>
<span id="cb22-11"><a href="reproducibility.html#cb22-11" tabindex="-1"></a></span>
<span id="cb22-12"><a href="reproducibility.html#cb22-12" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins50_59, location2)</span>
<span id="cb22-13"><a href="reproducibility.html#cb22-13" tabindex="-1"></a><span class="fu">n_groups</span>(agebins50_59)</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="reproducibility.html#cb24-1" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins50_59, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-2"><a href="reproducibility.html#cb24-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb24-3"><a href="reproducibility.html#cb24-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb24-4"><a href="reproducibility.html#cb24-4" tabindex="-1"></a>))</span>
<span id="cb24-5"><a href="reproducibility.html#cb24-5" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins50_59, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb24-6"><a href="reproducibility.html#cb24-6" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins50_59, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb24-7"><a href="reproducibility.html#cb24-7" tabindex="-1"></a>agebins50_59 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins50_59)</span>
<span id="cb24-8"><a href="reproducibility.html#cb24-8" tabindex="-1"></a>agebins50_59<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;55&quot;</span></span>
<span id="cb24-9"><a href="reproducibility.html#cb24-9" tabindex="-1"></a><span class="co">#test &lt;- agebins50_59[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb24-10"><a href="reproducibility.html#cb24-10" tabindex="-1"></a></span>
<span id="cb24-11"><a href="reproducibility.html#cb24-11" tabindex="-1"></a></span>
<span id="cb24-12"><a href="reproducibility.html#cb24-12" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins60_69, location2)</span>
<span id="cb24-13"><a href="reproducibility.html#cb24-13" tabindex="-1"></a><span class="fu">n_groups</span>(agebins60_69)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="reproducibility.html#cb26-1" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins60_69, <span class="at">weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-2"><a href="reproducibility.html#cb26-2" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(number_sampled) <span class="sc">~</span> number_sampled<span class="sc">/</span><span class="fu">sum</span>(number_sampled),</span>
<span id="cb26-3"><a href="reproducibility.html#cb26-3" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb26-4"><a href="reproducibility.html#cb26-4" tabindex="-1"></a>))</span>
<span id="cb26-5"><a href="reproducibility.html#cb26-5" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins60_69, <span class="at">step =</span> ifr_uncorr_agebins<span class="sc">*</span>weight)</span>
<span id="cb26-6"><a href="reproducibility.html#cb26-6" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins60_69, <span class="at">ifr_country_weighted =</span> <span class="fu">sum</span>(step))</span>
<span id="cb26-7"><a href="reproducibility.html#cb26-7" tabindex="-1"></a>agebins60_69 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins60_69)</span>
<span id="cb26-8"><a href="reproducibility.html#cb26-8" tabindex="-1"></a>agebins60_69<span class="sc">$</span>newmidpoint <span class="ot">&lt;-</span> <span class="st">&quot;65&quot;</span></span>
<span id="cb26-9"><a href="reproducibility.html#cb26-9" tabindex="-1"></a><span class="co">#test &lt;- agebins60_69[c(&quot;location2&quot;, &quot;ifr_uncorr_agebins&quot;, &quot;ifr_country_median&quot;, &quot;number_sampled&quot;, &quot;weight&quot;, &quot;ifr_country_weighted&quot;)]</span></span>
<span id="cb26-10"><a href="reproducibility.html#cb26-10" tabindex="-1"></a></span>
<span id="cb26-11"><a href="reproducibility.html#cb26-11" tabindex="-1"></a></span>
<span id="cb26-12"><a href="reproducibility.html#cb26-12" tabindex="-1"></a></span>
<span id="cb26-13"><a href="reproducibility.html#cb26-13" tabindex="-1"></a></span>
<span id="cb26-14"><a href="reproducibility.html#cb26-14" tabindex="-1"></a><span class="co">#3. Add to main dataset</span></span>
<span id="cb26-15"><a href="reproducibility.html#cb26-15" tabindex="-1"></a></span>
<span id="cb26-16"><a href="reproducibility.html#cb26-16" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(agebins0_19, agebins20_29, agebins30_39, agebins40_49, agebins50_59, agebins60_69)</span>
<span id="cb26-17"><a href="reproducibility.html#cb26-17" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins_new, newmidpoint)</span>
<span id="cb26-18"><a href="reproducibility.html#cb26-18" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins_new, <span class="sc">!</span><span class="fu">duplicated</span>(location2))</span>
<span id="cb26-19"><a href="reproducibility.html#cb26-19" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">mutate</span>(agebins_new, <span class="at">ifr_mdn_weighted =</span> <span class="fu">median</span>(ifr_country_weighted))</span>
<span id="cb26-20"><a href="reproducibility.html#cb26-20" tabindex="-1"></a><span class="fu">n_groups</span>(agebins_new)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="reproducibility.html#cb28-1" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins_new)</span>
<span id="cb28-2"><a href="reproducibility.html#cb28-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">select</span>(agebins_new, <span class="fu">c</span>(<span class="st">&quot;newmidpoint&quot;</span>, <span class="st">&quot;ifr_mdn_weighted&quot;</span>))</span>
<span id="cb28-3"><a href="reproducibility.html#cb28-3" tabindex="-1"></a>test<span class="sc">$</span>ifr_mdn_weighted <span class="ot">&lt;-</span> test<span class="sc">$</span>ifr_mdn_weighted<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb28-4"><a href="reproducibility.html#cb28-4" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">subset</span>(test, <span class="sc">!</span><span class="fu">duplicated</span>(ifr_mdn_weighted))</span>
<span id="cb28-5"><a href="reproducibility.html#cb28-5" tabindex="-1"></a></span>
<span id="cb28-6"><a href="reproducibility.html#cb28-6" tabindex="-1"></a></span>
<span id="cb28-7"><a href="reproducibility.html#cb28-7" tabindex="-1"></a><span class="do">### Output ----</span></span>
<span id="cb28-8"><a href="reproducibility.html#cb28-8" tabindex="-1"></a></span>
<span id="cb28-9"><a href="reproducibility.html#cb28-9" tabindex="-1"></a><span class="co"># &quot;IFR in younger age-strata&quot; ----</span></span>
<span id="cb28-10"><a href="reproducibility.html#cb28-10" tabindex="-1"></a></span>
<span id="cb28-11"><a href="reproducibility.html#cb28-11" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins<span class="sc">$</span>study))</span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="reproducibility.html#cb30-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="reproducibility.html#cb32-1" tabindex="-1"></a>test <span class="co">#Median IFR in the different age groups (they are here defined by their midpoints)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   newmidpoint ifr_mdn_weighted
##   &lt;chr&gt;                  &lt;dbl&gt;
## 1 10                  0.000998
## 2 25                  0.00967 
## 3 35                  0.0229  
## 4 45                  0.0503  
## 5 55                  0.149   
## 6 65                  0.491</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="reproducibility.html#cb34-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins0_19<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="reproducibility.html#cb36-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins20_29<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="reproducibility.html#cb38-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins30_39<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="reproducibility.html#cb40-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins40_49<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="reproducibility.html#cb42-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins50_59<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="reproducibility.html#cb44-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(agebins60_69<span class="sc">$</span>location2))</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="reproducibility.html#cb46-1" tabindex="-1"></a><span class="co"># Output for the purposes of proofreading ----</span></span>
<span id="cb46-2"><a href="reproducibility.html#cb46-2" tabindex="-1"></a></span>
<span id="cb46-3"><a href="reproducibility.html#cb46-3" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(agebins_new, <span class="fu">paste0</span>(<span class="st">&quot;ifr-younger-all-variables-&quot;</span>, today, <span class="st">&quot;.xlsx&quot;</span>))</span>
<span id="cb46-4"><a href="reproducibility.html#cb46-4" tabindex="-1"></a></span>
<span id="cb46-5"><a href="reproducibility.html#cb46-5" tabindex="-1"></a></span>
<span id="cb46-6"><a href="reproducibility.html#cb46-6" tabindex="-1"></a></span>
<span id="cb46-7"><a href="reproducibility.html#cb46-7" tabindex="-1"></a><span class="co"># Figure ----</span></span>
<span id="cb46-8"><a href="reproducibility.html#cb46-8" tabindex="-1"></a></span>
<span id="cb46-9"><a href="reproducibility.html#cb46-9" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">group_by</span>(agebins_new, newmidpoint)</span>
<span id="cb46-10"><a href="reproducibility.html#cb46-10" tabindex="-1"></a><span class="fu">n_groups</span>(agebins_new)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="reproducibility.html#cb48-1" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">filter</span>(agebins_new, <span class="sc">!</span><span class="fu">duplicated</span>(location2))</span>
<span id="cb48-2"><a href="reproducibility.html#cb48-2" tabindex="-1"></a>agebins_new <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(agebins_new)</span>
<span id="cb48-3"><a href="reproducibility.html#cb48-3" tabindex="-1"></a></span>
<span id="cb48-4"><a href="reproducibility.html#cb48-4" tabindex="-1"></a>ageplot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(agebins_new, <span class="fu">aes</span>(<span class="at">x =</span> newmidpoint, <span class="at">y =</span> ifr_country_weighted<span class="sc">*</span><span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb48-5"><a href="reproducibility.html#cb48-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>location2), <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb48-6"><a href="reproducibility.html#cb48-6" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb48-7"><a href="reproducibility.html#cb48-7" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>location2, <span class="at">color=</span>location2))<span class="sc">+</span></span>
<span id="cb48-8"><a href="reproducibility.html#cb48-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb48-9"><a href="reproducibility.html#cb48-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;IFR (%)&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Age&quot;</span>, <span class="at">color=</span><span class="st">&quot;Country&quot;</span>)<span class="sc">+</span></span>
<span id="cb48-10"><a href="reproducibility.html#cb48-10" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&quot;Set1&quot;</span>), </span>
<span id="cb48-11"><a href="reproducibility.html#cb48-11" tabindex="-1"></a>                                <span class="co">#rev(brewer.pal(8, &quot;Dark2&quot;)),</span></span>
<span id="cb48-12"><a href="reproducibility.html#cb48-12" tabindex="-1"></a>                                <span class="fu">rev</span>(<span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Accent&quot;</span>))))<span class="sc">+</span></span>
<span id="cb48-13"><a href="reproducibility.html#cb48-13" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()<span class="sc">+</span></span>
<span id="cb48-14"><a href="reproducibility.html#cb48-14" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_blank</span>())</span>
<span id="cb48-15"><a href="reproducibility.html#cb48-15" tabindex="-1"></a>ageplot1</span></code></pre></div>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis
## Transformation introduced infinite values in continuous y-axis</code></pre>
<p><img src="bookdown_portfolio_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="reproducibility.html#cb50-1" tabindex="-1"></a><span class="fu">pdf</span>(<span class="fu">paste0</span>(<span class="st">&quot;figure-younger-&quot;</span>, <span class="st">&quot;today&quot;</span>, <span class="st">&quot;.pdf&quot;</span>), <span class="at">height =</span> <span class="fl">5.5</span>, <span class="at">width =</span> <span class="dv">7</span>)</span>
<span id="cb50-2"><a href="reproducibility.html#cb50-2" tabindex="-1"></a></span>
<span id="cb50-3"><a href="reproducibility.html#cb50-3" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="voorbeeld-data-analyse-analyse-van-c.-elegans-plaatexperiment.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relationele-databases-en-sql.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04_Peerreview_openen.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown_portfolio.pdf", "bookdown_portfolio.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
